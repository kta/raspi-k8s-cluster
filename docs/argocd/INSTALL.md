# ArgoCD æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †æ›¸

```
  ___                   ____ ____      _____          _        _ _
 / _ \                 / ___|  _ \    |_   _|        | |      | | |
/ /_\ \_ __ __ _  ___ | |   | | | |     | | _ __  ___| |_ __ _| | |
|  _  | '__/ _` |/ _ \| |   | | | |     | || '_ \/ __| __/ _` | | |
| | | | | | (_| | (_) | |___| |_| |    _| || | | \__ \ || (_| | | |
\_| |_/_|  \__, |\___/ \____|____/     \___/_| |_|___/\__\__,_|_|_|
            __/ |
           |___/     Raspberry Pi Kubernetes Cluster Edition
```

---

## ç›®æ¬¡

1. [ã¯ã˜ã‚ã«](#1-ã¯ã˜ã‚ã«)
2. [å‰ææ¡ä»¶](#2-å‰ææ¡ä»¶)
3. [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †](#3-ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †)
4. [åˆæœŸè¨­å®š](#4-åˆæœŸè¨­å®š)
5. [å‹•ä½œç¢ºèª](#5-å‹•ä½œç¢ºèª)
6. [åŸºæœ¬çš„ãªä½¿ã„æ–¹](#6-åŸºæœ¬çš„ãªä½¿ã„æ–¹)
7. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#7-ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
8. [ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#8-ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)

---

## 1. ã¯ã˜ã‚ã«

### ArgoCDã¨ã¯ï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚              â”‚         â”‚              â”‚         â”‚              â”‚       â”‚
â”‚    â”‚  Git Repo    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   ArgoCD     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Kubernetes  â”‚       â”‚
â”‚    â”‚  (å®£è¨€çš„è¨­å®š)  â”‚         â”‚  (åŒæœŸç›£è¦–)   â”‚         â”‚  (ã‚¯ãƒ©ã‚¹ã‚¿)   â”‚       â”‚
â”‚    â”‚              â”‚         â”‚              â”‚         â”‚              â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                          â”‚  è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤      â”‚                               â”‚
â”‚                          â”‚  å·®åˆ†æ¤œçŸ¥         â”‚                               â”‚
â”‚                          â”‚  ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯      â”‚                               â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ArgoCDã¯**GitOps**ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ï¼š
- Gitãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®šã‚’**ä¿¡é ¼ã§ãã‚‹å”¯ä¸€ã®æƒ…å ±æº**ã¨ã—ã¦ä½¿ç”¨
- ã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã‚’Gitã¨**è‡ªå‹•çš„ã«åŒæœŸ**
- å¤‰æ›´ã®**å±¥æ­´ç®¡ç†**ã¨**ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯**ãŒå®¹æ˜“

---

## 2. å‰ææ¡ä»¶

### å¿…è¦ãªã‚‚ã®

| é …ç›® | è¦ä»¶ | ç¢ºèªã‚³ãƒãƒ³ãƒ‰ |
|------|------|--------------|
| Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ | ç¨¼åƒä¸­ã§ã‚ã‚‹ã“ã¨ | `kubectl get nodes` |
| kubectl | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ | `kubectl version --client` |
| Helm | v3.xä»¥ä¸Š | `helm version` |
| kubeconfig | è¨­å®šæ¸ˆã¿ | `kubectl cluster-info` |

### ã‚¯ãƒ©ã‚¹ã‚¿çŠ¶æ…‹ã®ç¢ºèª

```bash
# ãƒãƒ¼ãƒ‰ãŒ Ready çŠ¶æ…‹ã‹ç¢ºèª
kubectl get nodes

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:
# NAME     STATUS   ROLES           AGE   VERSION
# node-1   Ready    control-plane   Xd    v1.3X.X
# node-2   Ready    control-plane   Xd    v1.3X.X
# node-3   Ready    control-plane   Xd    v1.3X.X
```

```bash
# ã‚¯ãƒ©ã‚¹ã‚¿æƒ…å ±ã‚’ç¢ºèª
kubectl cluster-info

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:
# Kubernetes control plane is running at https://X.X.X.X:8443
# CoreDNS is running at ...
```

### Helmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆï¼‰

```bash
# macOS
brew install helm

# Linux (curl)
curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
helm version
```

---

## 3. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

### Step 1: Namespaceã®ä½œæˆ

```bash
kubectl create namespace argocd
```

```
âœ… ç¢ºèªãƒã‚¤ãƒ³ãƒˆ
$ kubectl get namespace argocd
NAME     STATUS   AGE
argocd   Active   Xs
```

### Step 2: Helmãƒªãƒã‚¸ãƒˆãƒªã®è¿½åŠ 

```bash
# ArgoCDã®Helmãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ 
helm repo add argo https://argoproj.github.io/argo-helm

# ãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±ã‚’æ›´æ–°
helm repo update
```

```
âœ… ç¢ºèªãƒã‚¤ãƒ³ãƒˆ
$ helm search repo argo/argo-cd
NAME            CHART VERSION   APP VERSION   DESCRIPTION
argo/argo-cd    X.X.X           vX.X.X        A Helm chart for Argo CD...
```

### Step 3: values.yamlã®ç¢ºèªã¨ç·¨é›†

```bash
# ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«åŒæ¢±ã®values.yamlã‚’ä½¿ç”¨
# å¿…è¦ã«å¿œã˜ã¦ç·¨é›†ã—ã¦ãã ã•ã„

# ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ç¢ºèª
cat terraform/bootstrap/argocd-values.yaml
```

**ä¸»è¦ãªè¨­å®šé …ç›®:**

| è¨­å®š | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜ |
|------|-------------|------|
| `server.service.type` | NodePort | ã‚µãƒ¼ãƒ“ã‚¹å…¬é–‹æ–¹æ³• |
| `server.service.nodePortHttps` | 30443 | HTTPSãƒãƒ¼ãƒˆç•ªå· |
| `server.extraArgs` | --insecure | HTTPSç„¡åŠ¹åŒ–ï¼ˆé–‹ç™ºç”¨ï¼‰ |
| `redis-ha.enabled` | false | é«˜å¯ç”¨æ€§Redisï¼ˆç„¡åŠ¹ï¼‰ |
| `dex.enabled` | false | å¤–éƒ¨èªè¨¼ï¼ˆç„¡åŠ¹ï¼‰ |

### Step 4: ArgoCDã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
helm install argocd argo/argo-cd \
  --namespace argocd \
  --values terraform/bootstrap/argocd-values.yaml \
  --wait
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ ãƒ’ãƒ³ãƒˆ                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --wait ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Šã€ã™ã¹ã¦ã®PodãŒReadyã«ãªã‚‹ã¾ã§å¾…æ©Ÿã—ã¾ã™ã€‚    â”‚
â”‚ Raspberry Piç’°å¢ƒã§ã¯æ•°åˆ†ã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 5: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª

```bash
# Podã®çŠ¶æ…‹ç¢ºèª
kubectl get pods -n argocd

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ï¼ˆã™ã¹ã¦Running/1/1ï¼‰:
# NAME                                               READY   STATUS    RESTARTS   AGE
# argocd-application-controller-0                   1/1     Running   0          Xm
# argocd-applicationset-controller-XXXXXXXXX-XXXXX  1/1     Running   0          Xm
# argocd-notifications-controller-XXXXXXXXX-XXXXX   1/1     Running   0          Xm
# argocd-redis-XXXXXXXXX-XXXXX                      1/1     Running   0          Xm
# argocd-repo-server-XXXXXXXXX-XXXXX                1/1     Running   0          Xm
# argocd-server-XXXXXXXXX-XXXXX                     1/1     Running   0          Xm
```

```bash
# Serviceã®ç¢ºèª
kubectl get svc -n argocd

# argocd-server ã® NodePort ã‚’ç¢ºèª
# argocd-server   NodePort   X.X.X.X   <none>   80:30080/TCP,443:30443/TCP
```

---

## 4. åˆæœŸè¨­å®š

### ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å–å¾—

```bash
# åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å–å¾—ï¼ˆè‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®ï¼‰
kubectl -n argocd get secret argocd-initial-admin-secret \
  -o jsonpath="{.data.password}" | base64 -d; echo
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å¿…ãšå¤‰æ›´ã—ã¦ãã ã•ã„ï¼                               â”‚
â”‚ å¾Œè¿°ã®ã€Œãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ArgoCD CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```bash
# macOS
brew install argocd

# Linux
curl -sSL -o argocd-linux-amd64 \
  https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64
sudo install -m 555 argocd-linux-amd64 /usr/local/bin/argocd
rm argocd-linux-amd64

# ARM64 Linux (Raspberry Pi)
curl -sSL -o argocd-linux-arm64 \
  https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-arm64
sudo install -m 555 argocd-linux-arm64 /usr/local/bin/argocd
rm argocd-linux-arm64
```

### CLIã§ãƒ­ã‚°ã‚¤ãƒ³

```bash
# port-forwardã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
kubectl port-forward svc/argocd-server -n argocd 8080:443

# ãƒãƒ¼ãƒ‰ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä½¿ç”¨ï¼ˆä¾‹: 192.168.1.100, Vagrantç’°å¢ƒã¯ 192.168.56.100ï¼‰
# argocd login <NODE_IP>:30443 --insecure
argocd login localhost:8080 --insecure

# Username: admin
# Password: ï¼ˆä¸Šã§å–å¾—ã—ãŸåˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼‰
```

### ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´

```bash
# CLIã§å¤‰æ›´
argocd account update-passwordargocd account update-password

# ã¾ãŸã¯ Web UI ã‹ã‚‰å¤‰æ›´
# Settings â†’ User Info â†’ UPDATE PASSWORD
```

---

## 5. å‹•ä½œç¢ºèª

### Web UIã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚   ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹:                                        â”‚
â”‚                                                                     â”‚
â”‚   ğŸŒ  https://<NODE_IP>:30443                                       â”‚
â”‚                                                                     â”‚
â”‚   ä¾‹: https://192.168.1.100:30443                                   â”‚
â”‚       https://raspi-node1:30443                                     â”‚
â”‚       https://localhost:8080                                       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±:
  - Username: admin
  - Password: ï¼ˆå–å¾—ã—ãŸåˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼‰
```

### ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆä»£æ›¿æ–¹æ³•ï¼‰

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã®8080ãƒãƒ¼ãƒˆã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã‚‹
kubectl port-forward svc/argocd-server -n argocd 8080:443

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ https://localhost:8080 ã«ã‚¢ã‚¯ã‚»ã‚¹
```

### æ¥ç¶šãƒ†ã‚¹ãƒˆ

```bash
# ArgoCD ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
argocd version

# ã‚¯ãƒ©ã‚¹ã‚¿ä¸€è¦§ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§in-clusterãŒç™»éŒ²æ¸ˆã¿ï¼‰
argocd cluster list
```

---

## 6. åŸºæœ¬çš„ãªä½¿ã„æ–¹

### ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆArgoCDã®å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ï¼‰
argocd app create guestbook \
  --repo https://github.com/argoproj/argocd-example-apps.git \
  --path guestbook \
  --dest-server https://kubernetes.default.svc \
  --dest-namespace default

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŒæœŸï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
argocd app sync guestbook
```

```
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ç¢ºèª:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  $ argocd app get guestbook                                  â”‚
â”‚                                                              â”‚
â”‚  Name:               guestbook                               â”‚
â”‚  Project:            default                                 â”‚
â”‚  Server:             https://kubernetes.default.svc          â”‚
â”‚  Namespace:          default                                 â”‚
â”‚  Health Status:      Healthy  âœ…                             â”‚
â”‚  Sync Status:        Synced   âœ…                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Web UIã§ã®æ“ä½œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ArgoCD Web UI                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚ + NEW APP       â”‚  â† æ–°ã—ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ guestbook                                              âœ… Healthy   â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚  â”‚ ğŸ”„ SYNC   ğŸ“Š DETAILS   ğŸ—‘ï¸  DELETE                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚  ã‚¢ãƒ—ãƒªã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒªã‚½ãƒ¼ã‚¹ã®ä¾å­˜é–¢ä¿‚ãŒãƒ„ãƒªãƒ¼è¡¨ç¤ºã•ã‚Œã¾ã™             â”‚
â”‚                                                                             â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚         â”‚   App     â”‚                                                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚               â”‚                                                             â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚       â–¼               â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ Service â”‚    â”‚ Deployment  â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                        â”‚                                                    â”‚
â”‚                        â–¼                                                    â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚                  â”‚ ReplicaSetâ”‚                                              â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                               â”‚
â”‚                        â”‚                                                    â”‚
â”‚                        â–¼                                                    â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚                   â”‚  Pod   â”‚                                                â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Applicationãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ä¾‹

è‡ªåˆ†ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’GitOpsã§ç®¡ç†ã™ã‚‹å ´åˆ:

```yaml
# app.yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: my-app
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/your-username/your-repo.git
    targetRevision: HEAD
    path: kubernetes/manifests
  destination:
    server: https://kubernetes.default.svc
    namespace: my-app-namespace
  syncPolicy:
    automated:
      prune: true      # Git ã‹ã‚‰å‰Šé™¤ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã‚’è‡ªå‹•å‰Šé™¤
      selfHeal: true   # æ‰‹å‹•å¤‰æ›´ã‚’è‡ªå‹•ã§å…ƒã«æˆ»ã™
    syncOptions:
      - CreateNamespace=true  # Namespaceã‚’è‡ªå‹•ä½œæˆ
```

```bash
# é©ç”¨
kubectl apply -f app.yaml
```

---

## 7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### âŒ PodãŒèµ·å‹•ã—ãªã„ / CrashLoopBackOff

```bash
# Podã®è©³ç´°ç¢ºèª
kubectl describe pod -n argocd <POD_NAME>

# ãƒ­ã‚°ç¢ºèª
kubectl logs -n argocd <POD_NAME>
```

**è€ƒãˆã‚‰ã‚Œã‚‹åŸå› :**
- ãƒ¡ãƒ¢ãƒªä¸è¶³ â†’ values.yaml ã®ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ã‚’èª¿æ•´
- ã‚¤ãƒ¡ãƒ¼ã‚¸ã®Pullã‚¨ãƒ©ãƒ¼ â†’ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª

#### âŒ Web UIã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

```bash
# Serviceã®ç¢ºèª
kubectl get svc -n argocd argocd-server

# NodePortãŒé–‹ã„ã¦ã„ã‚‹ã‹ç¢ºèª
kubectl get svc argocd-server -n argocd -o jsonpath='{.spec.ports[*].nodePort}'
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ:**
- [ ] æ­£ã—ã„ãƒãƒ¼ãƒ‰IPã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹
- [ ] ãƒãƒ¼ãƒˆç•ªå·ã¯æ­£ã—ã„ã‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 30443ï¼‰
- [ ] ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã§ãƒãƒ¼ãƒˆãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ãªã„ã‹

#### âŒ åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå–å¾—ã§ããªã„

```bash
# Secretã®å­˜åœ¨ç¢ºèª
kubectl get secret -n argocd argocd-initial-admin-secret

# å­˜åœ¨ã—ãªã„å ´åˆã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ
kubectl -n argocd patch secret argocd-secret \
  -p '{"stringData": {"admin.password": "'$(htpasswd -bnBC 10 "" newpassword | tr -d ':\n')'"}}'
```

#### âŒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŒæœŸãŒå¤±æ•—ã™ã‚‹

```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è©³ç´°ç¢ºèª
argocd app get <APP_NAME>

# åŒæœŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
argocd app sync <APP_NAME> --dry-run
```

**ã‚ˆãã‚ã‚‹åŸå› :**
- Gitãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒãªã„
- ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®æ–‡æ³•ã‚¨ãƒ©ãƒ¼
- ãƒªã‚½ãƒ¼ã‚¹ã®ä¾å­˜é–¢ä¿‚ã®å•é¡Œ

### ãƒ­ã‚°ã®ç¢ºèªæ–¹æ³•

```bash
# å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ­ã‚°ã‚’ç¢ºèª
kubectl logs -n argocd -l app.kubernetes.io/part-of=argocd --all-containers

# ç‰¹å®šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ­ã‚°
kubectl logs -n argocd deployment/argocd-server
kubectl logs -n argocd deployment/argocd-repo-server
kubectl logs -n argocd statefulset/argocd-application-controller
```

### ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³ã®ç¢ºèª

```bash
# Podã®ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³
kubectl top pods -n argocd

# ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å ´åˆã¯ values.yaml ã®ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ã‚’èª¿æ•´
```

---

## 8. ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ArgoCDã®å®Œå…¨å‰Šé™¤

```bash
# Helmãƒªãƒªãƒ¼ã‚¹ã‚’å‰Šé™¤
helm uninstall argocd -n argocd

# Namespaceã‚’å‰Šé™¤ï¼ˆã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚Œã‚‹ï¼‰
kubectl delete namespace argocd

# CRDã®å‰Šé™¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ - ä»–ã§ArgoCDã‚’ä½¿ã£ã¦ã„ãªã„å ´åˆã®ã¿ï¼‰
kubectl delete crd applications.argoproj.io
kubectl delete crd applicationsets.argoproj.io
kubectl delete crd appprojects.argoproj.io
```

```
âš ï¸ æ³¨æ„
CRDã‚’å‰Šé™¤ã™ã‚‹ã¨ã€ã™ã¹ã¦ã®ArgoCD Application ãƒªã‚½ãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚
ä»–ã®ã‚¯ãƒ©ã‚¹ã‚¿ã§ArgoCDã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€CRDã¯å‰Šé™¤ã—ãªã„ã§ãã ã•ã„ã€‚
```

---

## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

```bash
# ===== ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« =====
kubectl create namespace argocd
helm repo add argo https://argoproj.github.io/argo-helm
helm repo update
helm install argocd argo/argo-cd -n argocd -f terraform/bootstrap/argocd-values.yaml

# ===== çŠ¶æ…‹ç¢ºèª =====
kubectl get pods -n argocd                    # Podä¸€è¦§
kubectl get svc -n argocd                     # Serviceä¸€è¦§
argocd app list                               # ã‚¢ãƒ—ãƒªä¸€è¦§

# ===== èªè¨¼ =====
kubectl -n argocd get secret argocd-initial-admin-secret \
  -o jsonpath="{.data.password}" | base64 -d  # åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å–å¾—
argocd login <IP>:30443 --insecure            # CLIãƒ­ã‚°ã‚¤ãƒ³

# ===== ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç† =====
argocd app create <NAME> --repo <URL> --path <PATH> \
  --dest-server https://kubernetes.default.svc --dest-namespace <NS>
argocd app sync <NAME>                        # åŒæœŸ
argocd app delete <NAME>                      # å‰Šé™¤

# ===== ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° =====
kubectl logs -n argocd -l app.kubernetes.io/part-of=argocd
kubectl describe pod -n argocd <POD>
```

---

## å‚è€ƒãƒªãƒ³ã‚¯

- [ArgoCD å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://argo-cd.readthedocs.io/)
- [ArgoCD GitHub](https://github.com/argoproj/argo-cd)
- [ArgoCD Helm Chart](https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd)
- [GitOps ã¨ã¯](https://www.gitops.tech/)

---

```
ğŸ“ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦
ä½œæˆæ—¥: 2026-01-18
å¯¾è±¡: Raspberry Pi Kubernetes Cluster
ArgoCD ãƒãƒ¼ã‚¸ãƒ§ãƒ³: v2.13.x
Helm Chart ãƒãƒ¼ã‚¸ãƒ§ãƒ³: æœ€æ–°å®‰å®šç‰ˆ
```
